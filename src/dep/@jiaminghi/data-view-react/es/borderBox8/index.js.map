{"version":3,"file":"index.js","sources":["../../src/components/borderBox8/index.js"],"sourcesContent":["import React, { useState, useMemo } from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n\r\nimport classnames from 'classnames'\r\n\r\nimport { deepMerge } from '@jiaminghi/charts/lib/util/index'\r\nimport { deepClone } from '@jiaminghi/c-render/lib/plugin/util'\r\n\r\nimport useAutoResize from '../../use/autoResize'\r\n\r\nimport './style.less'\r\n\r\nconst defaultColor = ['#235fa7', '#4fd2dd']\r\n\r\nconst BorderBox = ({ children, className, style, color = [], dur = 3 }) => {\r\n  const { width, height, domRef } = useAutoResize()\r\n\r\n  const [{ path, gradient, mask }] = useState(() => {\r\n    const timestamp = Date.now()\r\n\r\n    return {\r\n      path: `border-box-8-path-${timestamp}`,\r\n      gradient: `border-box-8-gradient-${timestamp}`,\r\n      mask: `border-box-8-mask-${timestamp}`\r\n    }\r\n  })\r\n\r\n  const mergedColor = useMemo(() => deepMerge(deepClone(defaultColor, true), color || []), [color])\r\n\r\n  const length = useMemo(() => (width + height - 5) * 2, [width, height])\r\n\r\n  const classNames = useMemo(() => classnames('dv-border-box-8', className), [\r\n    className\r\n  ])\r\n\r\n  return (\r\n    <div className={classNames} style={style} ref={domRef}>\r\n      <svg className='dv-svg-container' width={width} height={height}>\r\n        <defs>\r\n          <path\r\n            id={path}\r\n            d={`M2.5, 2.5 L${width - 2.5}, 2.5 L${width - 2.5}, ${height -\r\n              2.5} L2.5, ${height - 2.5} L2.5, 2.5`}\r\n            fill='transparent'\r\n          />\r\n          <radialGradient id={gradient} cx='50%' cy='50%' r='50%'>\r\n            <stop offset='0%' stopColor='#fff' stopOpacity='1' />\r\n            <stop offset='100%' stopColor='#fff' stopOpacity='0' />\r\n          </radialGradient>\r\n\r\n          <mask id={mask}>\r\n            <circle cx='0' cy='0' r='150' fill={`url(#${gradient})`}>\r\n              <animateMotion\r\n                dur={`${dur}s`}\r\n                path={`M2.5, 2.5 L${width - 2.5}, 2.5 L${width -\r\n                  2.5}, ${height - 2.5} L2.5, ${height - 2.5} L2.5, 2.5`}\r\n                rotate='auto'\r\n                repeatCount='indefinite'\r\n              />\r\n            </circle>\r\n          </mask>\r\n        </defs>\r\n\r\n        <use stroke={mergedColor[0]} strokeWidth='1' href={`#${path}`} />\r\n\r\n        <use\r\n          stroke={mergedColor[1]}\r\n          strokeWidth='3'\r\n          href={`#${path}`}\r\n          mask={`url(#${mask})`}\r\n        >\r\n          <animate\r\n            attributeName='stroke-dasharray'\r\n            from={`0, ${length}`}\r\n            to={`${length}, 0`}\r\n            dur={`${dur}s`}\r\n            repeatCount='indefinite'\r\n          />\r\n        </use>\r\n      </svg>\r\n\r\n      <div className='border-box-content'>{children}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nBorderBox.propTypes = {\r\n  children: PropTypes.node,\r\n  className: PropTypes.string,\r\n  style: PropTypes.object,\r\n  color: PropTypes.array,\r\n  dur: PropTypes.number\r\n}\r\n\r\nexport default BorderBox\r\n"],"names":["defaultColor","BorderBox","children","className","style","color","dur","useAutoResize","width","height","domRef","useState","timestamp","Date","now","path","gradient","mask","mergedColor","useMemo","deepMerge","deepClone","length","classNames","classnames","propTypes","PropTypes","node","string","object","array","number"],"mappings":";;;;;;;;;;;AAaA,IAAMA,eAAe,CAAC,SAAD,EAAY,SAAZ,CAArB;;AAEA,IAAMC,YAAY,SAAZA,SAAY,OAAyD;MAAtDC,QAAsD,QAAtDA,QAAsD;MAA5CC,SAA4C,QAA5CA,SAA4C;MAAjCC,KAAiC,QAAjCA,KAAiC;wBAA1BC,KAA0B;MAA1BA,KAA0B,8BAAlB,EAAkB;sBAAdC,GAAc;MAAdA,GAAc,4BAAR,CAAQ;;uBACvCC,eADuC;MACjEC,KADiE,kBACjEA,KADiE;MAC1DC,MAD0D,kBAC1DA,MAD0D;MAClDC,MADkD,kBAClDA,MADkD;;kBAGtCC,SAAS,YAAM;QAC1CC,YAAYC,KAAKC,GAAL,EAAlB;;WAEO;mCACsBF,SADtB;2CAE8BA,SAF9B;mCAGsBA;KAH7B;GAHiC,CAHsC;;;MAGhEG,IAHgE,eAGhEA,IAHgE;MAG1DC,QAH0D,eAG1DA,QAH0D;MAGhDC,IAHgD,eAGhDA,IAHgD;;MAanEC,cAAcC,QAAQ;WAAMC,OAAUC,OAAUrB,YAAV,EAAwB,IAAxB,CAAV,EAAyCK,SAAS,EAAlD,CAAN;GAAR,EAAqE,CAACA,KAAD,CAArE,CAApB;;MAEMiB,SAASH,QAAQ;WAAM,CAACX,QAAQC,MAAR,GAAiB,CAAlB,IAAuB,CAA7B;GAAR,EAAwC,CAACD,KAAD,EAAQC,MAAR,CAAxC,CAAf;;MAEMc,aAAaJ,QAAQ;WAAMK,WAAW,iBAAX,EAA8BrB,SAA9B,CAAN;GAAR,EAAwD,CACzEA,SADyE,CAAxD,CAAnB;;SAKE;;MAAK,WAAWoB,UAAhB,EAA4B,OAAOnB,KAAnC,EAA0C,KAAKM,MAA/C;;;QACO,WAAU,kBAAf,EAAkC,OAAOF,KAAzC,EAAgD,QAAQC,MAAxD;;;;;cAGUM,IADN;8BAEmBP,QAAQ,GAAzB,iBAAsCA,QAAQ,GAA9C,YAAsDC,SACpD,GADF,iBACeA,SAAS,GADxB,gBAFF;gBAIO;UALT;;;YAOkB,IAAIO,QAApB,EAA8B,IAAG,KAAjC,EAAuC,IAAG,KAA1C,EAAgD,GAAE,KAAlD;wCACQ,QAAO,IAAb,EAAkB,WAAU,MAA5B,EAAmC,aAAY,GAA/C,GADF;wCAEQ,QAAO,MAAb,EAAoB,WAAU,MAA9B,EAAqC,aAAY,GAAjD;SATJ;;;YAYQ,IAAIC,IAAV;;;cACU,IAAG,GAAX,EAAe,IAAG,GAAlB,EAAsB,GAAE,KAAxB,EAA8B,gBAAcD,QAAd,MAA9B;;mBAEYV,GAAR,MADF;qCAEsBE,QAAQ,GAA5B,iBAAyCA,QACvC,GADF,YACUC,SAAS,GADnB,iBACgCA,SAAS,GADzC,gBAFF;sBAIS,MAJT;2BAKc;;;;OApBtB;mCA0BO,QAAQS,YAAY,CAAZ,CAAb,EAA6B,aAAY,GAAzC,EAA6C,YAAUH,IAAvD,GA1BF;;;;kBA6BYG,YAAY,CAAZ,CADV;uBAEc,GAFd;sBAGYH,IAHZ;0BAIgBE,IAAd;;;yBAGgB,kBADhB;wBAEcK,MAFd;cAGSA,MAAP,QAHF;eAIUhB,GAAR,MAJF;uBAKc;;;KAxCpB;;;QA6CO,WAAU,oBAAf;;;GA9CJ;CArBF;;AAwEAL,UAAUwB,SAAV,GAAsB;YACVC,UAAUC,IADA;aAETD,UAAUE,MAFD;SAGbF,UAAUG,MAHG;SAIbH,UAAUI,KAJG;OAKfJ,UAAUK;CALjB;;;;"}